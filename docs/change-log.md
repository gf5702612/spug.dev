---
id: change-log
title: 更新日志
---

# 2.3.4
`2020-06-26`

🎉 端午节快乐 😄
- 🌟 新增应用发布全局变量 SPUG_REPO_DIR
- 🌟 应用发布结果通知增加申请标题信息 #130 
- 🌟 应用管理添加描述信息过滤 #130 
- 🛠 优化发布配置删除将自动删除关联数据文件
- 🛠 优化主机验证规则避免验证成功但无法连接的问题
- 🐞 修复文件管理器访问无权限目录时路径显示错误的问题
- 🐞 修复多主机发布时页面异常的问题 #133
- 🐞 修复主机执行的发布操作环境变量异常的问题 #134

## 2.3.3
`2020-06-15`
- 🌟 任务计划Cron新增实时显示预估执行时间特性
- 🌟 发布详情页日志现已支持自动滚动
- 🌟 任务计划新增执行失败钉钉/企业微信通知代替系统通知
- 🛠 报警趋势图修改为平滑折线
- 🛠 优化表格支持部分字段排序
- 🛠 优化表格分页支持调整pageSize
- 🛠 优化批量导入规则不允许主机名相同
- 🛠 优化发布配置表单数据录入及校验规则
- 🐞 修复主机批量导入某些情况下错误使用默认密码的问题 #124
- 🐞 修复普通用户创建应用或环境某些情况下失败的问题

## 2.3.2

`2020-06-11`
- 🌟 监控中心现已支持企业微信告警
- 🌟 任务计划增加立即执行测试功能
- 🌟 新增常规发布全局变量 `SPUG_GIT_BRANCH`,`SPUG_GIT_COMMIT_ID`,`SPUG_GIT_TAG` [文档](/docs/deploy-config/#%E5%85%A8%E5%B1%80%E5%8F%98%E9%87%8F)
- 🛠 优化常规发布目录已存在时的提示信息
- 🛠 优化发布时服务侧执行的动作或命令的环境变量
- 🛠 优化发布结果通知多主机时的展示效果
- 🛠 优化主机权限在任务计划和监控中心模块的表现
- 🐞 修复某些情况下保留历史版本不正确的问题

## 2.3.1

`2020-06-03`
- 🌟 常规发布git clone将使用设置的密钥作为备选密钥
- 🛠 优化主机选择支持搜索匹配
- 🛠 更新paramiko版本以支持新的密钥格式
- 🛠 优化任务计划Cron触发器的周保持与crontab一致
- 🛠 优化任务计划页面上可以得到更多错误信息
- 🐞 修复user add命令-s参数与文档不一致的问题
- 🐞 修复update升级未正常更新表结构的问题

## 2.3.0

`2020-05-31`
- 🌟 新增主机文件管理器功能
- 🌟 新增主机批量导入功能
- 🌟 新增上传自定义密钥对功能
- 🌟 任务计划新增执行历史查看功能
- 🌟 发布申请批量删除现已支持按保留数量删除
- 🌟 角色管理新增主机权限控制功能
- 🌟 主机编辑新增修改类别功能
- 🛠 改进webssh安全性
- 🛠 优化发布申请Tag排序及展示
- 🛠 优化批量执行页面可以得到更多错误反馈和样式改进
- 🐞 修复自定义发布在无主机动作时发布状态未正常更新的问题
- 🐞 修复发布全局变量SPUG_HOST_ID和SPUG_HOST_NAME某些情况下未正确赋值的问题

注意事项：
- `v2.3.0` 改进了常规发布的回滚机制，在回滚发布时将仅执行`应用发布前`和`应用发布后`钩子脚本，并使用主机上存储的历史版本。
- `v2.3.0` 新增了主机权限管理功能，从`v2.2.x`升级后普通用户（管理员不受权限影响）将无法在主机管理和批量执行模块看到主机，请在角色管理的主机权限中对角色进行授权。

## 2.2.6

`2020-05-18`
- 🌟 发布申请现已支持批量删除
- 🌟 任务计划添加Cron触发器支持
- 🌟 添加manage.py user命令实现创建/启用/重置账户功能
- 🌟 新建发布申请选择应用支持过滤
- 🌟 自定义邮件服务添加在线测试
- 🌟 添加关于页面web版本号显示
- 🛠 优化发布权限(自己创建的环境/应用自动具有对应的发布权限)
- 🛠 优化主机录入自动移除多余空格
- 🛠 优化工作台应用部署图表百分比显示
- 🛠 支持非SSL的邮件服务
- 🐞 修复主机信息无法编辑的问题
- 🐞 修复可能会出现同名账户的问题
- 🐞 修复某些情况下发布权限页获取不到新创建的应用的问题

## 2.2.5

`2020-05-05`
- 🌟 新增 `manage.py update` 用于快速升级 `spug` 版本
- 🌟 发布结果通知添加企业微信支持
- 🌟 添加主机管理连接地址搜索项 [#61](https://github.com/openspug/spug/issues/61)
- 🛠 前端build不再产生 `sourcemap` 文件
- 🛠 告警信息现在会展示更多内容
- 🛠 侧边导航超出窗口高度自动滚动
- 🐞 修复故障恢复告警可能错误发出的问题
- 🐞 修复角色管理功能权限某些情况下显示错误的问题
- 🐞 修复可能会出现同名账户引起登录问题
- 🐞 修复发布申请表单校验不严谨的问题
- 🐞 修复钉钉告警错误的提示需要设置调用凭据的问题

## 2.2.4

`2020-04-20`
- 🌟 新建发布申请支持搜索Branch/Tag
- 🌟 主机选择添加全选/反选功能
- 🌟 发布结果通知添加主机信息
- 🛠 新建常规发布申请默认最近一次发布所选择的分支
- 🛠 优化主机字段标题展示
- 🛠 优化发布申请列表筛选条件
- 🛠 优化主机删除前置条件检查
- 🐞 修复未分配应用权限时某些接口报错的问题
- 🐞 修复钉钉告警联系人过滤规则错误的问题
- 🐞 修复已删除用户所关联的角色无法被删除的问题

## 2.2.3

`2020-04-07`
- 🛠 优化创建发布申请应用名称过长时气泡显示完整名称
- 🛠 发布添加`SPUG_DEPLOY_ID`,`SPUG_HOST_ID`,`SPUG_HOST_NAME`全局变量 [文档](/docs/deploy-config/#%E5%85%A8%E5%B1%80%E5%8F%98%E9%87%8F)
- 🐞 修复某些错误未能正常反馈到发布详情页的问题

## 2.2.2

`2020-04-01`
- 🌟 发布日志查看添加刷新功能
- 🛠 优化报警服务异常通知及表单提示
- 🐞 修复发布日志记录可能不完整的问题 [#46](https://github.com/openspug/spug/issues/46)
- 🐞 修复使用自定义邮件服务仍然会提示输入访问凭据的问题

## 2.2.1

`2020-03-30`
- 🛠 优化删除环境提示信息
- 🛠 应用发布中状态可查看日志
- 🛠 ldap账户不再允许被删除，可使用禁用功能代替 [#42](https://github.com/openspug/spug/issues/42)
- 🐞 修复报警联系组删除问题 [#43](https://github.com/openspug/spug/issues/43)
- 🐞 修复无可用环境的情况下编辑配置时报错的问题
- 🐞 修复系统设置中报警服务保存可能报错的问题

## 2.2.0

`2020-03-20`
- 🌟 添加应用发布日志查看功能
- 🌟 添加LDAP登录支持
- 🌟 添加系统设置-关于页面
- 🛠 自动移除命令中换行包含的`\r`字符
- 🛠 优化LDAP未配置时登录的提示信息
- 🛠 角色管理新增关联账户数量展示
- 🐞 修复已删除用户可以登录的问题
- 🐞 修复登录接口兼容性
- 🐞 修复导航栏某些情况下未按预期展示的问题
- 🐞 修复某些情况下账户编辑角色列表未正常显示的问题
- 🐞 修复执行发布可能意外报错的问题

## 2.1.1

`2020-03-08`
- 🌟 添加监控中心任务类型过滤功能
- 🌟 常规发布配置支持全屏编写命令
- 🐞 修复工作台统计主机数量不正确的问题
- 🐞 修复通知未读数量错误计算的问题
- 🐞 修复监控中心禁用启用描述错误的问题
- 🐞 修复常规发布更改Git仓库配置不生效的问题

## 2.1.0

`2020-02-25`

- 🌟 新增了发布结果通知功能
- 🐞 优化主机/模版选择弹窗显示
- 🐞 修复GitPython依赖包更新导致的问题
- 🐞 修复DeployRequest对象的问题
- 🐞 修复macOS主机常规发布报错的问题


## 2.0.0

`2020-01-30`

🎉2.0 发布了，全新的基于 ant.design 的美观 UI，欢迎 预览体验 ，如需帮助请访问 官方文档。


## 2.0.0-beta.1

`2020-01-19`

- 🌟 主机管理
- 🌟 批量执行
- 🌟 应用发布
- 🌟 配置中心
- 🌟 任务调度
- 🌟 监控中心
- 🌟 报警中心
